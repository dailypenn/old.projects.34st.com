<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Projects | 34th Street Magazine</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./style.css" type="text/css">

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <!-- TypeKit -->
    <script src="https://use.typekit.net/ziq1fqf.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
  </head>
  <body>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-707447-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-707447-2');
    </script>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <a href="http://www.34st.com" target="_blank">
        <img src="https://s3.amazonaws.com/media.dpn/58880_streetwhite01f.png" alt="34th Street">
      </a>
    </nav>

    <div class="container">
      <h1>PROJECTS &amp; GUIDES</h1>

      <div class="row" id="featured-main"></div>

      <hr>

      <div class="row" id="featured-secondary"></div>

      <hr>

      <h2>All Projects</h2>

      <div id="articles"></div>

      <footer>
        <hr>
        <p>Copyright &copy; 2017, The Daily Pennsylvanian. All Rights Reserved.</p>
      </footer>
    </div>
  </body>

  <script type="text/javascript">
    $.getJSON( "./projects.json", function(data) {

      $.each(data.featured, function(artIndex) {
        var article = data.featured[artIndex];
        var htmlStr = '';
        if (artIndex === 0) {
          htmlStr =
            '<div class="col-md-7"><img src="' + article.image + '" class="img img-responsive"></div>' +
            '<div class="col-md-5">' +
              '<div class="row" id="info">' +
                '<div class="col-xs-6" id="featured-tag">' + article.section + '</div>' +
                '<div class="col-xs-6" id="featured-date">' + article.date + '</div>' +
              '</div>' +
              '<div class="row" id="featured-title">' +
                '<a href="' + article.link + '" target="_blank">' + article.title + '</a>' +
              '</div>' +
              '<div class="row" id="desc">' + article.description + '</div>' +
              '<div class="row" id="credits">' + (article.sponsored ? 'Sponsored by ' + article.author : article.author) + '</div>' +
            '</div>'
          $('#featured-main').append(htmlStr);
        } else {
          htmlStr =
            '<div class="col-md-6">' +
              '<div class="row"><img src="' + article.image + '" class="img img-responsive"></div>' +
              '<div class="row" id="info">' +
                '<div class="col-xs-6" id="tag">' + article.section + '</div>' +
                '<div class="col-xs-6" id="date">' + article.date + '</div>' +
              '</div>' +
              '<div class="row" id="title">' +
                '<a href="' + article.link + '" target="_blank">' + article.title + '</a>' +
              '</div>' +
              '<div class="row" id="desc">' + article.description + '</div>' +
              '<div class="row" id="credits">' + (article.sponsored ? 'Sponsored by ' + article.author : article.author) + '</div>' +
            '</div>'
          $('#featured-secondary').append(htmlStr);
        }
      })

      $.each(data.articles, function(artIndex) {
        var article = data.articles[artIndex];
        var htmlStr =
          '<div class="row">' +
            '<div class="col-md-4">' +
              '<img src="' + article.image + '" class="img img-responsive">' +
            '</div>' +
            '<div class="col-md-8">' +
              '<div class="row" id="info">' +
                '<div class="col-xs-6" id="all-tag">' + article.section + '</div>' +
                '<div class="col-xs-6" id="all-date">' + article.date + '</div>' +
              '</div>' +
              '<div class="row" id="title">' +
                '<a href="' + article.link + '" target="_blank">' + article.title + '</a>' +
              '</div>' +
              '<div class="row" id="desc">' + article.description + '</div>' +
              '<div class="row" id="credits">' + (article.sponsored ? 'Sponsored by ' + article.author : article.author) + '</div>' +
            '</div>' +
          '</div>'
          // don't add hr to the last article
          if (artIndex !== data.articles.length - 1) {
            htmlStr += '<hr>';
          }
        $('#articles').append(htmlStr);
      })
    });
  </script>
</html>
